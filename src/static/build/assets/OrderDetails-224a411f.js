import{r as g,b as m,d as p,e,m as S,k as M,q as V,bE as j,bF as R,o as U,a as D,F as q,h as B,w as F,i as k,f as o,g as s,t as i,u as E,p as N,l as c}from"./index-6e99a621.js";import{_ as O}from"./Alert-66beb7ea.js";import{_ as Q}from"./OrderForm-2cf76b67.js";import{Q as L}from"./qrcode.vue.esm-3493d478.js";const H={class:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},P=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),G={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},I={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},J={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},K={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4 text-center"},W={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},X=e("h2",{class:"font-semibold text-xl leading-6 text-gray-900",id:"modal-title"},"File topografico",-1),Y={class:"mt-2"},Z={__name:"ModalFile",props:{order_id:{type:Number,required:!0}},emits:["close-alert","save-file"],setup(w,{emit:x}){const v=w,y=g(null);function _(){x("close-alert")}function h(r){y.value=r.target.files[0]}async function f(){var r=new FormData;r.append("order_filetopographic",y.value);let b=S.updateTopographicFile+`${v.order_id}`;console.log(b);try{const u=await M({method:"put",url:b,data:r,headers:{"content-type":`multipart/form-data; boundary=${r._boundary}`}});console.log(u),x("save-file",u.data)}catch(u){alert(u)}}return(r,b)=>(m(),p("form",null,[e("div",H,[P,e("div",G,[e("div",I,[e("div",J,[e("div",K,[e("div",W,[X,e("div",Y,[e("div",null,[e("input",{type:"file",accept:"pdf",onChange:h},null,32)])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 gap-2"},[e("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-green-500 px-3 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-inset hover:bg-red-900 sm:mt-0 sm:w-auto",onClick:f},"Save"),e("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset hover:bg-gray-200 sm:mt-0 sm:w-auto",onClick:_},"Cancel")])])])])])]))}},ee={class:"p-4 w-full"},te={class:"flex flex-wrap gap-4 justify-between my-4"},oe={class:"text-2xl"},se={key:0,class:"flex gap-2"},re=e("hr",{class:"my-5"},null,-1),le={class:"flex bg-slate-100 p-4 gap-10 flex-wrap rounded-md"},ae={class:"flex-0"},ne={class:"flex-1"},ie={class:"flex-1"},de={class:"bg-gray-100 my-2 p-4 rounded-md text-sm"},ce=e("p",null,[e("b",null,"Moduli:")],-1),ue=e("hr",{class:"my-2"},null,-1),me={class:"flex gap-6"},pe={class:"text-xl hover:text-blue-800"},_e={class:"text-xl hover:text-blue-800"},he={class:"bg-gray-100 my-2 p-4 rounded-md text-sm"},fe={class:"flex justify-between"},be=e("p",null,[e("b",null,"File:")],-1),ge=e("hr",{class:"my-2"},null,-1),xe={key:0},ve=["href"],ye={class:"bg-gray-100 my-2 p-4 rounded-md text-sm"},we=e("p",null,[e("b",null,"Note di processo:")],-1),Ce=e("hr",{class:"my-1"},null,-1),$e=e("hr",{class:"my-5"},null,-1),ze=e("h1",{class:"text-xl mt-4"},"Reparti",-1),Fe={class:"flex gap-2 mt-4 flex-wrap"},Ae={__name:"OrderDetails",props:{order_number:String},setup(w){const x=w,v=V();console.log(v.first_name);const y=j();R();const _=g([]),h=g(!1),f=g(!1),r=g(!1),b=l=>new Date(l).toLocaleString().split(",")[0];async function u(){const l=`${S.ordersCRUD}${x.order_number}/`;try{const a=await M.get(l);console.log(a),_.value.push(a.data),console.log(a.data)}catch(a){alert(a)}}async function A(l){let a=`${S.ordersCRUD}${l}/`;try{const n=await M.delete(a);C(),y.push({name:"ordini"})}catch(n){alert(n)}}function C(){h.value=!h.value}function $(){f.value=!f.value}function z(){r.value=!r.value}function T(l){console.log(l),z(),_.value[0].order_filetopographic=l.order_filetopographic}return U(()=>{u()}),(l,a)=>{const n=D("font-awesome-icon"),d=D("router-link");return m(),p("main",null,[(m(!0),p(q,null,B(_.value,t=>(m(),p("div",ee,[F(o(O,{"icon-type":"error",title:"Attenzione",message:"Sei sicuro di voler eliminare la scheda?",onCloseAlert:C,onConfirm:ke=>A(t.order_number)},null,8,["onConfirm"]),[[k,h.value]]),F(o(Q,{order_id:t.board,order:t,onCloseModal:$,onSaveData:$},null,8,["order_id","order"]),[[k,f.value]]),F(o(Z,{onCloseAlert:z,order_id:t.id,onSaveFile:T},null,8,["order_id"]),[[k,r.value]]),e("div",te,[e("h1",oe,[o(n,{icon:"hard-drive",class:"text-blue-950"}),s(" Ordine: "+i(t.order_number),1)]),E(v).company_role=="M"?(m(),p("div",se,[e("button",{class:"hover:bg-amber-400 hover:border-amber-400 text-blue-950 font-semibold hover:text-white py-1 px-6 border border-blue-950 rounded",onClick:$},[o(n,{icon:"folder-plus"}),s(" Modifica ordine ")]),e("button",{class:"bg-red-600 hover:bg-red-900 text-white font-semibold hover:text-white py-1 px-6 border rounded",onClick:C}," Elimina ")])):N("",!0)]),re,e("div",le,[e("div",ae,[o(L,{class:"my-2",value:t.order_number,size:60,level:"H"},null,8,["value"])]),e("div",ne,[e("p",null,[s(" Numero d'ordine: "),e("b",null,i(t.order_number),1)]),e("p",null,[s(" Serial number: "),e("b",null,i(t.order_serialnumber),1)]),e("p",null,[s(" Quantità: "),e("b",null,i(t.order_quantity),1)])]),e("div",ie,[e("p",null,[s(" Data di creazione: "),e("b",null,i(b(t.created_at)),1)]),e("p",null,[s(" Cliente: "),e("b",null,i(t.customer),1)]),e("p",null,[s(" Personalizzazione: "),e("b",null,i(t.order_customization),1)])])]),e("div",de,[ce,ue,e("div",me,[o(d,{to:{name:"foglio-caratterizzazione",params:{uuid:t.uuid}}},{default:c(()=>[e("h3",pe,[o(n,{icon:"passport"}),s(" Foglio caratterizzazione ")])]),_:2},1032,["to"]),o(d,{to:{name:"foglio-cestello",params:{uuid:t.uuid}}},{default:c(()=>[e("h3",_e,[o(n,{icon:"passport"}),s(" Cartellino ")])]),_:2},1032,["to"])])]),e("div",he,[e("div",fe,[be,o(n,{icon:"circle-plus",class:"text-2xl hover:text-green-700",onClick:z})]),ge,t.order_filetopographic?(m(),p("p",xe,[e("a",{href:t.order_filetopographic,target:"”_blank”",class:"text-green-700"},[o(n,{icon:"file-pdf",class:"text-2xl"}),s(" Topographic ")],8,ve)])):N("",!0)]),e("div",ye,[we,Ce,e("p",null,i(t.order_process_note),1)]),$e,ze,e("div",Fe,[o(d,{to:{name:"smt-details",params:{smt_number:t.order_smt}},class:"py-2 px-6 border border-blue-950 rounded-md bg-gray-50 hover:bg-blue-900 hover:text-white"},{default:c(()=>[s(" SMT ")]),_:2},1032,["to"]),o(d,{to:{name:"welding-details",params:{welding_number:t.order_welding}},class:"py-2 px-6 border border-blue-950 rounded-md bg-gray-50 hover:bg-blue-900 hover:text-white"},{default:c(()=>[s(" Saldatura ")]),_:2},1032,["to"]),o(d,{to:{name:"verify-details",params:{verify_number:t.order_verify}},class:"py-2 px-6 border border-blue-950 rounded-md bg-gray-50 hover:bg-blue-900 hover:text-white"},{default:c(()=>[s(" Verifica ")]),_:2},1032,["to"]),o(d,{to:{name:"test-details",params:{test_number:t.order_test}},class:"py-2 px-6 border border-blue-950 rounded-md bg-gray-50 hover:bg-blue-900 hover:text-white"},{default:c(()=>[s(" Collaudi ")]),_:2},1032,["to"]),o(d,{to:{name:"shipping-details",params:{order_id:t.id}},class:"py-2 px-6 border border-blue-950 rounded-md bg-gray-50 hover:bg-blue-900 hover:text-white"},{default:c(()=>[s(" Spedizioni ")]),_:2},1032,["to"])])]))),256))])}}};export{Ae as default};
